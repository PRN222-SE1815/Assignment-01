@using System.Security.Claims
@{
    var userRole = User.FindFirst(ClaimTypes.Role)?.Value ?? "";
    var userName = User.Identity?.Name ?? "Guest";
    var isAdmin = userRole == "ADMIN";
    var isTeacher = userRole == "TEACHER";
    var isStudent = userRole == "STUDENT";
}

<nav class="navbar">
<div class="navbar-container">
    <div class="navbar-brand">
        <a href="@(isAdmin ? Url.Action("Index", "AdminHome") : isTeacher ? Url.Action("Index", "TeacherHome") : isStudent ? Url.Action("Index", "StudentHome") : "#")" class="brand-link">
            <span class="brand-icon">🎓</span>
            <span class="brand-text">TPF University</span>
        </a>
    </div>

        <div class="navbar-menu">
            @if (isAdmin)
            {
                <a asp-controller="AdminUser" asp-action="Create" class="nav-link">
                    <span class="nav-icon">👥</span>
                    User Management
                </a>
                <a asp-controller="AdminSchedule" asp-action="Index" class="nav-link">
                <span class="nav-icon">📅</span>
                    Schedule
                </a>
                <a href="#" class="nav-link">
                    <span class="nav-icon">📚</span>
                    Courses
                </a>
                <a href="#" class="nav-link">
                    <span class="nav-icon">📊</span>
                    Reports
                </a>
            }
            else if (isTeacher)
            {
                <a asp-controller="TeacherGradebook" asp-action="Index" class="nav-link">
                    <span class="nav-icon">📚</span>
                    My Classes
                </a>
                <a asp-controller="TeacherGradebook" asp-action="Index" class="nav-link">
                    <span class="nav-icon">📝</span>
                    Grading
                </a>
                <a asp-controller="Chat" asp-action="Index" class="nav-link">
                    <span class="nav-icon">💬</span>
                    Chat
                </a>
            }
            else if (isStudent)
            {
                <a asp-controller="StudentRegistration" asp-action="MyCourses" class="nav-link">
                    <span class="nav-icon">📖</span>
                    My Courses
                </a>
                <a asp-controller="StudentRegistration" asp-action="Index" class="nav-link">
                    <span class="nav-icon">📝</span>
                    Registration
                </a>
                <a asp-controller="StudentSchedule" asp-action="Index" class="nav-link">
                    <span class="nav-icon">📅</span>
                    Schedule
                </a>
                <a asp-controller="StudentGrades" asp-action="Index" class="nav-link">
                    <span class="nav-icon">📊</span>
                    Grades
                </a>
                <a asp-controller="Chat" asp-action="Index" class="nav-link">
                    <span class="nav-icon">💬</span>
                    Chat
                </a>
            }
        </div>

        <div class="navbar-user">
            <!-- Notification Bell -->
            <div class="notification-bell" id="notificationBell">
                <button type="button" class="bell-btn" onclick="toggleNotificationPanel()">
                    <span class="bell-icon">🔔</span>
                    <span class="notification-count" id="notificationCount" style="display: none;">0</span>
                </button>
                <div class="notification-panel" id="notificationPanel">
                    <div class="panel-header">
                        <span>Notifications</span>
                        <button type="button" class="clear-btn" onclick="clearAllNotifications()">Clear all</button>
                    </div>
                    <div class="panel-body" id="notificationList">
                        <div class="empty-notifications">
                            <span>🔕</span>
                            <p>No new notifications</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="user-info">
                <span class="user-role">@userRole</span>
                <span class="user-name">@userName</span>
            </div>
            @if (User.Identity?.IsAuthenticated == true)
            {
                <form asp-controller="Account" asp-action="Logout" method="post" class="logout-form">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn-logout">
                        <span class="logout-icon">🚪</span>
                        Logout
                    </button>
                </form>
            }
        </div>
    </div>
</nav>
